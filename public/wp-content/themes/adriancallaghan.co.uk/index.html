<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-US">

    <head profile="http://gmpg.org/xfn/11">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.min.css" rel="stylesheet" />
        <link href="/style.css" rel="stylesheet" />        	
        <!--[if gte IE 9]>
            <style type="text/css">
              .gradient {
                 filter: none;
              }
            </style>
        <![endif]-->
        <script src="http://code.jquery.com/jquery-2.0.3.min.js"></script>
        <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
        <script src="/bezier.js"></script>
        <title>Test</title>
  </head>
  <body>
        <canvas id="c1" width="1" height="2" class="gradient"></canvas>
        <canvas id="c2" width="1" height="2"></canvas>
        
        <div class="container">

            <div class="masthead">
              <h1 class="muted">Adrian Callaghan</h3>
              <h2 class="muted">Freelance web developer</h3>
              <div class="navbar">
                <div class="navbar-inner">
                  <div class="container">
                    <ul class="nav">
                      <li class="active"><a href="#">Home</a></li>
                      <li class="dropdown">
                        <a data-toggle="dropdown" class="dropdown-toggle" href="#">Dropdown <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                          <li><a href="#">Action</a></li>
                          <li><a href="#">Another action</a></li>
                          <li><a href="#">Something else here</a></li>
                          <li class="divider"></li>
                          <li class="nav-header">Nav header</li>
                          <li><a href="#">Separated link</a></li>
                          <li><a href="#">One more separated link</a></li>
                        </ul>
                      </li> 
                     <li class="dropdown">
                        <a data-toggle="dropdown" class="dropdown-toggle" href="#">Dropdown <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                          <li><a href="#">Action</a></li>
                          <li><a href="#">Another action</a></li>
                          <li><a href="#">Something else here</a></li>
                          <li class="divider"></li>
                          <li class="nav-header">Nav header</li>
                          <li><a href="#">Separated link</a></li>
                          <li><a href="#">One more separated link</a></li>
                        </ul>
                      </li>                            
                    </ul>
                    <form class="form-search navbar-form pull-right">
                      <div class="input-append">
                          <input type="text" class="span2 search-query">
                          <button type="submit" class="btn">Search</button>
                      </div>
                    </form> 
                  </div>
                </div>
              </div><!-- /.navbar -->
            </div>

   
        <!--div class="hero-unit">
          <h1>Marketing stuff!</h1>
          <p class="lead">Cras justo odio, dapibus ac facilisis in, egestas eget quam. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus.</p>
          <a class="btn btn-large btn-success" href="#">Get started today</a>
        </div-->

        <hr>

        <!-- Example row of columns -->
        <div class="row-fluid">
          <div class="span4">
            <h2>Heading</h2>
            <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>
            <p><a class="btn" href="#">View details &raquo;</a></p>
          </div>
          <div class="span4">
            <h2>Heading</h2>
            <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>
            <p><a class="btn" href="#">View details &raquo;</a></p>
         </div>
          <div class="span4">
            <h2>Heading</h2>
            <p>Donec sed odio dui. Cras justo odio, dapibus ac facilisis in, egestas eget quam. Vestibulum id ligula porta felis euismod semper. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa.</p>
            <p><a class="btn" href="#">View details &raquo;</a></p>
          </div>
        </div>

        <hr>

        <div class="footer">
          <p>&copy; Company 2013</p>
        </div>

      </div> <!-- /container -->
        

        <script type="text/javascript">  

          var globals = {
              delay:55,
              alpha:0.97,
              c1: document.getElementById('c1'),
              c2: document.getElementById('c2'),
              c1context: c1.getContext('2d'),
              c2context: c2.getContext('2d')
          };

          var beziers=[
              new bezier(globals,3),
              new bezier(globals,4),
          ];

          function resizeBanner(){

              //var width = globals.c1.parentNode.offsetWidth;
              var width = window.innerWidth;
              var height = window.innerHeight;
              globals.c1.width = width;
              globals.c1.height = height;
              globals.c2.width = width;
              globals.c2.height = height;
              //globals.delay = Math.floor(width/10);
              for (var x in beziers){    
                  beziers[x].init();
              } 
          }

          function tick(){

              globals.c2.width = globals.c2.width; // clear canvas 2
              globals.c2context.globalAlpha = globals.alpha; // set alpha on 2 to slightly faded
              //globals.c2context.globalCompositeOperation = 'lighter';
              globals.c2context.drawImage(c1, 0, 0); // copy 1 to 2 but slightly faded
              for (var x in beziers){    
                  beziers[x].update().draw(globals.c2context) // draw bezier onto canvas 2
              }            
              globals.c1.width = globals.c1.width; // clear canvas 1
              globals.c1context.drawImage(c2, 0, 0); // copy canvas 2 to to canvas 1            
              setTimeout(tick, globals.delay); 
          }


          $(window).resize(resizeBanner);
          $().ready(function(){
              resizeBanner();
              tick();
          });
        </script>
  
  </body>
    
</html>