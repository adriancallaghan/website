<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-US">

    <head profile="http://gmpg.org/xfn/11">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.min.css" rel="stylesheet" />
        <link href="/style.css" rel="stylesheet" />        	
        <!--[if gte IE 9]>
            <style type="text/css">
              .gradient {
                 filter: none;
              }
            </style>
        <![endif]-->
        <script src="http://code.jquery.com/jquery-2.0.3.min.js"></script>
        <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
        <script src="/bezier.js"></script>
        <title>Test</title>
  </head>
  <body>
      
      <div class="container-fluid">
          <div class="row-fluid">		
              <div class="span12 banner">                   
                    <canvas id="c1" width="1" height="2" class="gradient"></canvas>
                    <canvas id="c2" width="1" height="2"></canvas>
                    <h1>Adrian Callaghan</h1>
                    <h2>Freelance Web developer</h2>
              </div>
          </div>
          <div class="row-fluid">
              <div class="span6 hero-unit">
                  <h1>Latest</h1>
              </div>
              <div class="span6 hero-unit">
                  <h1>Latest</h1>
              </div>
          </div>
          <div class="row-fluid">		
              <div class="span12 hero-unit">                   
                    <h1>Footer</h1>
              </div>
          </div>
      </div>

      <script type="text/javascript">  
        
        var globals = {
            delay:55,
            alpha:0.97,
            c1: document.getElementById('c1'),
            c2: document.getElementById('c2'),
            c1context: c1.getContext('2d'),
            c2context: c2.getContext('2d')
        };

        var beziers=[
            new bezier(globals,3),
            new bezier(globals,4),
        ];

        function resizeBanner(){
            
            var width = globals.c1.parentNode.offsetWidth;
            globals.c1.width = width;
            globals.c1.height = Math.floor(width/8);
            globals.c2.width = width;
            globals.c2.height = Math.floor(width/8);
            //globals.delay = Math.floor(width/10);
            for (var x in beziers){    
                beziers[x].init();
            } 
        }

        function tick(){

            globals.c2.width = globals.c2.width; // clear canvas 2
            globals.c2context.globalAlpha = globals.alpha; // set alpha on 2 to slightly faded
            //globals.c2context.globalCompositeOperation = 'lighter';
            globals.c2context.drawImage(c1, 0, 0); // copy 1 to 2 but slightly faded
            for (var x in beziers){    
                beziers[x].update().draw(globals.c2context) // draw bezier onto canvas 2
            }            
            globals.c1.width = globals.c1.width; // clear canvas 1
            globals.c1context.drawImage(c2, 0, 0); // copy canvas 2 to to canvas 1            
            setTimeout(tick, globals.delay); 
        }
          
   
        $(window).resize(resizeBanner);
        $().ready(function(){
            resizeBanner();
            tick();
        });
      </script>
  
  </body>
    
</html>