<!DOCTYPE HTML>
<html>
  <head>
    <style type="text/css">@import url("style.css");</style> 
    <!--[if gte IE 9]>
        <style type="text/css">
          .gradient {
             filter: none;
          }
        </style>
    <![endif]-->
    <script src="bezier.js"></script>
  </head>
  <body>
      
    <canvas id="c1" width="1024" height="200" class="gradient"></canvas>
    <canvas id="c2" width="1024" height="200"></canvas>
    <script type="text/javascript">  
        
        var globals = {
            delay:40,
            c1: document.getElementById('c1'),
            c2: document.getElementById('c2'),
            c1context: c1.getContext('2d'),
            c2context: c2.getContext('2d')
        };

        var beziers=[
            new bezier(globals),
            new bezier(globals),
        ];

        function tick(){

            globals.c2.width = globals.c2.width; // clear canvas 2
            globals.c2context.globalAlpha = 0.97; // set alpha on 2 to slightly faded
            //globals.c2context.globalCompositeOperation = 'lighter';
            globals.c2context.drawImage(c1, 0, 0); // copy 1 to 2 but slightly faded
            
            
            for (var x in beziers){    
                beziers[x].update().draw(globals.c2context) // draw bezier onto canvas 2
            }
            
            globals.c1.width = globals.c1.width; // clear canvas 1
            globals.c1context.drawImage(c2, 0, 0); // copy canvas 2 to to canvas 1
            
            setTimeout(tick, globals.delay); 
        }
          
        function init(){
          tick();
        }
        
        init();
        
    </script>
  </body>
</html>